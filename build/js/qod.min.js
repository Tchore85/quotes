!function(o){let e="";o("#new-quote-button").on("click",function(n){n.preventDefault(),e=document.URL,console.log(e),o.ajax({method:"GET",url:qod_vars.rest_url+"/wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(e){console.log(e[0]);let n=e[0].content.rendered,t=e[0].title.rendered;console.log(e[0].slug),history.pushState(null,null,e[0].slug),o(".entry-content").html(n),o(".entry-title").html(t)}).fail(function(o){console.log("an error occured",o)}),o(window).on("popstate",function(){window.location.replace(e)})}),o("#quote-submission-form").on("submit",function(e){e.preventDefault();const n=o("#quote-author"),t=o("#quote-content"),l=o("#quote-source"),u=o("#quote-source-url");o.ajax({method:"POST",url:qod_vars.rest_url+"wp/v2/posts/",data:{title:n.val(),content:t.val(),_qod_quote_source:l.val(),_qod_quote_source_url:u.val()},beforeSend:function(o){o.setRequestHeader("X-WP-Nonce",qod_vars.nonce)}}).done(function(e){console.log(n+t+l+u),console.log(e),o("#quote-submission-form").slideUp(function(){o(".quote-submission-wrapper").append("<p>Thank you for a new submission</p>")})}).fail(function(o){console.log("something went wrong"),console.log(o)})})}(jQuery);